<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ElHaji Auto - Vente de Voitures Premium</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
  <style>
    :root {
      --primary: #1a202c;
      --secondary: #3182ce;
      --accent: #e53e3e;
      --light: #f9fafb;
      --dark: #2c3e50;
      --gray: #718096;
      --success: #48bb78;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--light);
      color: var(--dark);
      line-height: 1.6;
      overflow-x: hidden;
      scroll-behavior: smooth;
    }
    
    header {
      background-color: var(--primary);
      color: white;
      padding: 15px 0;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: 0 2px 15px rgba(0,0,0,0.2);
    }
    
    .header-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .logo {
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    
    .logo:hover {
      transform: scale(1.05);
    }
    
    .logo-icon {
      background: var(--secondary);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
    }
    
    .logo-text h1 {
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .logo-text p {
      font-size: 0.9rem;
      color: #cbd5e0;
    }
    
    nav {
      display: flex;
      background-color: var(--primary);
      justify-content: center;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    nav a {
      color: #cbd5e0;
      padding: 16px 24px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      position: relative;
    }
    
    nav a:hover, 
    nav a.active {
      color: white;
    }
    
    nav a::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 3px;
      background: var(--secondary);
      transition: width 0.3s ease;
    }
    
    nav a:hover::after,
    nav a.active::after {
      width: 80%;
    }
    
    .hero {
      position: relative;
      background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1503736334956-4c8f8e92946d?auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      height: 85vh;
      min-height: 600px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      text-align: center;
      padding: 0 20px;
      overflow: hidden;
    }
    
    .hero-content {
      max-width: 900px;
      animation: fadeInUp 1.2s ease forwards;
    }
    
    .hero-content h1 {
      font-size: 3.6rem;
      margin-bottom: 20px;
      font-weight: 900;
      letter-spacing: 1.5px;
      text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
      line-height: 1.2;
    }
    
    .hero-content p {
      font-size: 1.3rem;
      font-weight: 500;
      margin-bottom: 35px;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
    }
    
    .hero-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .btn {
      padding: 16px 40px;
      font-size: 1.1rem;
      font-weight: 700;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      text-transform: uppercase;
      letter-spacing: 1px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }
    
    .btn-primary {
      background-color: var(--secondary);
      color: white;
      box-shadow: 0 8px 20px rgba(49,130,206,0.4);
    }
    
    .btn-primary:hover {
      background-color: #2b6cb0;
      transform: translateY(-3px);
      box-shadow: 0 12px 25px rgba(49,130,206,0.6);
    }
    
    .btn-secondary {
      background-color: transparent;
      color: white;
      border: 2px solid white;
    }
    
    .btn-secondary:hover {
      background-color: rgba(255,255,255,0.1);
      transform: translateY(-3px);
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .section {
      padding: 80px 20px;
      max-width: 1200px;
      margin: 0 auto;
      display: none;
    }
    
    .section.active {
      display: block;
    }
    
    .section-header {
      text-align: center;
      margin-bottom: 60px;
    }
    
    .section-header h2 {
      font-size: 2.5rem;
      color: var(--primary);
      margin-bottom: 15px;
      position: relative;
      display: inline-block;
    }
    
    .section-header h2::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 4px;
      background: var(--secondary);
      border-radius: 2px;
    }
    
    .section-header p {
      max-width: 700px;
      margin: 25px auto 0;
      color: var(--gray);
      font-size: 1.1rem;
    }
    
    .services {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 50px;
    }
    
    .service-card {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0,0,0,0.08);
      transition: all 0.4s ease;
      text-align: center;
      padding: 40px 25px;
      height: 100%;
    }
    
    .service-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }
    
    .service-icon {
      width: 80px;
      height: 80px;
      background: rgba(49,130,206,0.1);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 25px;
      color: var(--secondary);
      font-size: 2rem;
    }
    
    .service-card h3 {
      font-size: 1.5rem;
      margin-bottom: 15px;
      color: var(--primary);
    }
    
    .service-card p {
      color: var(--gray);
      line-height: 1.8;
    }
    
    .cars-container {
      position: relative;
    }
    
    .cars {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 30px;
      margin-bottom: 50px;
    }
    
    .car {
      background: white;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 5px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .car:hover {
      transform: translateY(-8px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    }

    .car-image {
      position: relative;
      width: 100%;
      height: 250px;
      overflow: hidden;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .car-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
      transition: transform 0.5s ease;
    }
    
    .car:hover .car-image img {
      transform: scale(1.05);
    }
    
    .car-badge {
      position: absolute;
      top: 15px;
      left: 15px;
      background: var(--accent);
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      z-index: 10;
    }
    
    .car-content {
      padding: 25px;
    }
    
    .car-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .car-header h3 {
      font-size: 1.4rem;
      color: var(--primary);
    }
    
    .car-price {
      color: var(--secondary);
      font-weight: 700;
      font-size: 1.4rem;
    }
    
    .car-details {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }
    
    .car-detail {
      display: flex;
      align-items: center;
      gap: 8px;
      color: var(--gray);
    }
    
    .car-detail i {
      color: var(--secondary);
    }
    
    .car-cta {
      display: block;
      width: 100%;
      padding: 12px;
      background: var(--secondary);
      color: white;
      text-align: center;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: background 0.3s ease;
    }
    
    .car-cta:hover {
      background: #2b6cb0;
    }
    
    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    .page-btn {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      border-radius: 8px;
      background: white;
      color: var(--dark);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .page-btn:hover:not(.active) {
      background: #edf2f7;
    }
    
    .page-btn.active {
      background: var(--secondary);
      color: white;
    }
    
    .page-btn.prev, .page-btn.next {
      width: auto;
      padding: 0 20px;
      gap: 8px;
    }
    
    .page-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    .about-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 50px;
      align-items: center;
    }
    
    .about-image {
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f5f5f5;
    }
    
    .about-image img {
      max-width: 100%;
      max-height: 100%;
      object-fit: contain;
      display: block;
    }
    
    .about-text h3 {
      font-size: 2rem;
      margin-bottom: 20px;
      color: var(--primary);
    }
    
    .about-text p {
      margin-bottom: 20px;
      line-height: 1.8;
    }
    
    .about-stats {
      display: flex;
      justify-content: space-between;
      margin-top: 30px;
      flex-wrap: wrap;
    }
    
    .stat-item {
      text-align: center;
      min-width: 100px;
    }
    
    .stat-item .number {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--secondary);
    }
    
    .stat-item .label {
      color: var(--gray);
      font-size: 0.9rem;
    }
    
    .sell-form-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
      padding: 40px;
    }
    
    .sell-form h3 {
      font-size: 1.8rem;
      margin-bottom: 30px;
      position: relative;
      color: var(--primary);
    }
    
    .sell-form h3::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--secondary);
    }
    
    .form-row {
      display: flex;
      flex-wrap: wrap;
      margin: 0 -15px;
    }
    
    .form-group {
      flex: 1 0 calc(50% - 30px);
      margin: 0 15px 25px;
    }
    
    .form-group.full-width {
      flex: 1 0 calc(100% - 30px);
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--primary);
    }
    
    .form-group input,
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 14px;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 1rem;
      transition: border 0.3s ease;
    }
    
    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--secondary);
    }
    
    .form-group textarea {
      min-height: 120px;
      resize: vertical;
    }
    
    .submit-btn {
      padding: 16px 40px;
      background: var(--secondary);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      width: 100%;
      margin-top: 10px;
    }
    
    .submit-btn:hover {
      background: #2b6cb0;
    }
    
    .contact-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 50px;
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.1);
    }
    
    .contact-info {
      background: linear-gradient(135deg, var(--primary), #2d3748);
      color: white;
      padding: 50px;
    }
    
    .contact-info h3 {
      font-size: 1.8rem;
      margin-bottom: 30px;
      position: relative;
    }
    
    .contact-info h3::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--secondary);
    }
    
    .contact-detail {
      display: flex;
      gap: 15px;
      margin-bottom: 25px;
      align-items: flex-start;
    }
    
    .contact-icon {
      background: rgba(255,255,255,0.1);
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--secondary);
    }
    
    .contact-text h4 {
      margin-bottom: 5px;
    }
    
    .contact-text p, 
    .contact-text a {
      color: #cbd5e0;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .contact-text a:hover {
      color: var(--secondary);
    }
    
    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 30px;
    }
    
    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      color: white;
      transition: all 0.3s ease;
    }
    
    .social-links a:hover {
      background: var(--secondary);
      transform: translateY(-3px);
    }
    
    .contact-form {
      padding: 50px;
    }
    
    .contact-form h3 {
      font-size: 1.8rem;
      margin-bottom: 30px;
      position: relative;
      color: var(--primary);
    }
    
    .contact-form h3::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 60px;
      height: 3px;
      background: var(--secondary);
    }
    
    .contact-form .form-group {
      margin-bottom: 20px;
    }
    
    .modal {
      display: none;
      position: fixed;
      z-index: 2000;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.85);
      align-items: center;
      justify-content: center;
      padding: 20px;
      overflow-y: auto;
    }
    
    .modal-content {
      background: white;
      border-radius: 15px;
      max-width: 900px;
      width: 100%;
      position: relative;
      box-shadow: 0 20px 50px rgba(0,0,0,0.4);
      animation: modalFadeIn 0.4s ease forwards;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    @keyframes modalFadeIn {
      from {opacity: 0; transform: translateY(50px);}
      to {opacity: 1; transform: translateY(0);}
    }
    
    .modal-close {
      position: absolute;
      top: 20px;
      right: 25px;
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      cursor: pointer;
      z-index: 10;
      transition: color 0.3s ease;
      background: rgba(255,255,255,0.8);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .modal-close:hover {
      color: var(--accent);
    }
    
    .modal-header {
      padding: 30px 30px 15px;
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
      padding-bottom: 15px;
    }
    
    .modal-header h3 {
      font-size: 1.8rem;
      color: var(--primary);
    }
    
    .modal-price {
      color: var(--secondary);
      font-size: 1.8rem;
      font-weight: 700;
      margin: 10px 0;
    }
    
    .modal-main {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      padding: 0 30px 30px;
    }
    
    .modal-images {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    
    .main-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .main-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
      display: block;
    }
    
    .image-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: rgba(0,0,0,0.5);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      cursor: pointer;
      z-index: 5;
      transition: all 0.3s ease;
    }
    
    .image-nav:hover {
      background: var(--secondary);
    }
    
    .image-nav.prev {
      left: 15px;
    }
    
    .image-nav.next {
      right: 15px;
    }
    
    .image-nav i {
      font-size: 1.2rem;
    }
    
    .image-indicator {
      position: absolute;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.5);
      color: white;
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
    }
    
    .thumbnails {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      padding: 10px 0;
    }
    
    .thumbnail {
      height: 100px;
      width: 100px;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      opacity: 0.7;
      transition: all 0.3s ease;
      border: 2px solid transparent;
      background: #f5f5f5;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .thumbnail:hover, 
    .thumbnail.active {
      opacity: 1;
      transform: scale(1.05);
      border-color: var(--secondary);
    }
    
    .thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      border-radius: 12px;
    }
    
    .modal-info {
      padding: 10px 0;
    }
    
    .car-specs {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 25px 0;
    }
    
    .spec-item {
      background: #f8fafc;
      padding: 15px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .spec-item i {
      color: var(--secondary);
      font-size: 1.2rem;
    }
    
    .spec-text {
      display: flex;
      flex-direction: column;
    }
    
    .spec-label {
      font-size: 0.9rem;
      color: var(--gray);
    }
    
    .spec-value {
      font-weight: 600;
      color: var(--primary);
    }
    
    .modal-description {
      line-height: 1.8;
      margin: 25px 0;
    }
    
    .modal-actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .modal-btn {
      flex: 1;
      padding: 15px;
      text-align: center;
      border-radius: 8px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-contact {
      background: var(--secondary);
      color: white;
    }
    
    .btn-contact:hover {
      background: #2b6cb0;
    }
    
    .btn-testdrive {
      background: transparent;
      color: var(--secondary);
      border: 2px solid var(--secondary);
    }
    
    .btn-testdrive:hover {
      background: rgba(49,130,206,0.1);
    }
    
    footer {
      background: var(--primary);
      color: white;
      padding: 70px 0 30px;
    }
    
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 40px;
    }
    
    .footer-col h4 {
      font-size: 1.3rem;
      margin-bottom: 25px;
      position: relative;
    }
    
    .footer-col h4::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 0;
      width: 40px;
      height: 3px;
      background: var(--secondary);
    }
    
    .footer-links {
      list-style: none;
    }
    
    .footer-links li {
      margin-bottom: 12px;
    }
    
    .footer-links a {
      color: #cbd5e0;
      text-decoration: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .footer-links a:hover {
      color: var(--secondary);
      transform: translateX(5px);
    }
    
    .footer-contact p {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 15px;
      color: #cbd5e0;
    }
    
    .footer-contact i {
      color: var(--secondary);
      min-width: 20px;
    }
    
    .footer-social {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .footer-social a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      color: white;
      transition: all 0.3s ease;
    }
    
    .footer-social a:hover {
      background: var(--secondary);
      transform: translateY(-3px);
    }
    
    .copyright {
      text-align: center;
      padding-top: 40px;
      margin-top: 50px;
      border-top: 1px solid rgba(255,255,255,0.1);
      color: #a0aec0;
      font-size: 0.9rem;
    }
    
    .back-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--secondary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: all 0.4s ease;
      z-index: 100;
      box-shadow: 0 5px 15px rgba(49,130,206,0.4);
    }
    
    .back-to-top.show {
      opacity: 1;
      visibility: visible;
    }
    
    .back-to-top:hover {
      background: #2b6cb0;
      transform: translateY(-5px);
    }
    
    .form-notification {
      padding: 15px;
      margin: 20px 0;
      border-radius: 8px;
      display: none;
      text-align: center;
    }

    .success-message {
      background: rgba(72, 187, 120, 0.15);
      border: 1px solid var(--success);
      color: var(--success);
    }

    .error-message {
      background: rgba(229, 62, 62, 0.15);
      border: 1px solid var(--accent);
      color: var(--accent);
    }

    .loading {
      position: relative;
      pointer-events: none;
      opacity: 0.7;
    }

    .loading::after {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 255, 255, 0.7);
      z-index: 10;
      border-radius: 8px;
    }

    .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 11;
      width: 40px;
      height: 40px;
      border: 4px solid rgba(49, 130, 206, 0.2);
      border-top: 4px solid var(--secondary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    .modal-btn.btn-call {
      background-color: #2b6cb0;
      color: white;
    }

    .call-popup {
      display: none;
      position: fixed;
      z-index: 3000;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.6);
      align-items: center;
      justify-content: center;
    }

    .call-popup-content {
      background: white;
      padding: 30px 25px;
      border-radius: 15px;
      text-align: center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 90%;
    }

    .call-popup-content h4 {
      margin-bottom: 20px;
      font-size: 1.3rem;
      color: var(--primary);
    }

    .call-popup-content ul {
      list-style: none;
      padding: 0;
      margin-bottom: 20px;
    }

    .call-popup-content li {
      margin-bottom: 15px;
    }

    .call-popup-content a {
      text-decoration: none;
      font-weight: 600;
      color: var(--secondary);
      font-size: 1.1rem;
      transition: color 0.3s;
    }

    .call-popup-content a:hover {
      color: var(--accent);
    }

    .close-call-popup {
      padding: 10px 25px;
      background-color: var(--gray);
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    .close-call-popup:hover {
      background-color: #4a5568;
    }
    
    .service-card-link {
      display: block;
      text-decoration: none;
      color: inherit;
      border-radius: 12px;
      transition: transform 0.3s ease;
      height: 100%;
    }
    
    .service-card-link:hover {
      transform: translateY(-5px);
    }
    
    .service-card-link:hover .service-card {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
      border: 2px solid var(--secondary);
    }
    
    .service-card:after {
      content: "Cliquez pour en savoir plus";
      display: block;
      margin-top: 15px;
      font-size: 0.85rem;
      color: var(--secondary);
      font-weight: 600;
    }
    
    .service-card.reprise .service-icon {
      background: rgba(72, 187, 120, 0.1);
      color: #2b6cb0;
    }
    
    @media (max-width: 992px) {
      .about-content,
      .contact-container,
      .modal-main {
        grid-template-columns: 1fr;
      }
      
      .about-image {
        max-width: 100%;
        margin: 0 auto;
      }
      
      .hero-content h1 {
        font-size: 3rem;
      }
      
      .section {
        padding: 60px 20px;
      }
      
      .modal-main {
        padding: 0 20px 20px;
        gap: 20px;
      }
      
      .main-image {
        height: 300px;
      }
      
      .modal-actions {
        flex-direction: column;
      }
      
      .modal-btn {
        width: 100%;
        margin-bottom: 10px;
      }
      
      .sell-form-container {
        padding: 30px;
      }
    }
    
    @media (max-width: 768px) {
      .car-image {
        height: 200px;
      }
      
      nav {
        flex-wrap: wrap;
      }
      
      nav a {
        padding: 12px 15px;
        font-size: 0.9rem;
      }
      
      .hero-content h1 {
        font-size: 2.5rem;
      }
      
      .hero-content p {
        font-size: 1.1rem;
      }
      
      .hero-buttons {
        flex-direction: column;
        gap: 15px;
      }
      
      .btn {
        width: 100%;
        justify-content: center;
      }
      
      .section-header h2 {
        font-size: 2rem;
      }
      
      .car-specs {
        grid-template-columns: 1fr;
      }
      
      .car-image {
        width: 100%;
        height: 250px;
      }
      
      .modal-header {
        padding: 20px 20px 10px;
      }
      
      .modal-header h3 {
        font-size: 1.5rem;
      }
      
      .modal-price {
        font-size: 1.5rem;
      }
      
      .main-image {
        height: 250px;
      }
      
      .thumbnail {
        height: 80px;
      }
      
      .contact-info, .contact-form {
        padding: 30px;
      }
    }
    
    @media (max-width: 576px) {
      .hero {
        height: 75vh;
        min-height: 500px;
      }
      
      .hero-content h1 {
        font-size: 2rem;
      }
      
      .stat-item .number {
        font-size: 2rem;
      }
      
      .contact-info, .contact-form {
        padding: 30px 20px;
      }
      
      .modal-content {
        max-width: 95%;
      }
      
      .sell-form-container {
        padding: 20px;
      }
      
      .form-group {
        flex: 1 0 calc(100% - 30px);
      }
      
      .modal-main {
        padding: 0 15px 15px;
      }
      
      .main-image {
        height: 200px;
      }
      
      .modal-header {
        padding: 15px 15px 5px;
      }
      
      .modal-header h3 {
        font-size: 1.3rem;
      }
      
      .modal-price {
        font-size: 1.3rem;
      }
      
      .car-specs {
        gap: 10px;
        margin: 15px 0;
      }
      
      .spec-item i {
        font-size: 1rem;
      }
      
      .spec-label {
        font-size: 0.8rem;
      }
      
      .spec-value {
        font-size: 0.9rem;
      }
      
      .modal-description {
        font-size: 0.9rem;
        margin: 15px 0;
      }
      
      .thumbnails {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .thumbnail {
        height: 70px;
      }
    }
    
    .modal.closing .modal-content {
      animation: modalFadeOut 0.3s ease forwards;
    }
    
    @keyframes modalFadeOut {
      from {opacity: 1; transform: translateY(0);}
      to {opacity: 0; transform: translateY(50px);}
    }
    
    @media (max-width: 768px) {
      nav {
        overflow-x: auto;
        white-space: nowrap;
        -webkit-overflow-scrolling: touch;
      }
      
      nav a {
        padding: 12px 10px;
        font-size: 0.85rem;
      }
    }
  </style>
</head>
<body>

<header>
  <div class="header-container">
    <div class="logo" id="logo">
      <img src="https://i.imgur.com/hM0DZ3N.png" alt="ElHaji Auto Logo" />
      <div class="logo-text">
        <h1>ElHaji Auto</h1>
        <p>Concessionnaire Premium au Maroc</p>
      </div>
    </div>
    <div class="contact-header">
      <p><i class="fas fa-phone"></i> +212 6 63 08 02 62</p>
    </div>
  </div>
</header>

<nav>
  <a href="#accueil" class="active" data-section="accueil">Accueil</a>
  <a href="#voitures" data-section="voitures">Voitures</a>
  <a href="#services" data-section="services">Services</a>
  <a href="#apropos" data-section="apropos">À propos</a>
  <a href="#vendre" data-section="vendre">Vendre ma voiture</a>
  <a href="#contact" data-section="contact">Contact</a>
</nav>

<section id="accueil" class="hero">
  <div class="hero-content">
    <h1>Votre Partenaire Automobile de Confiance au Maroc</h1>
    <p>Découvrez notre sélection exclusive de véhicules neufs et d'occasion, avec un service premium et des garanties étendues.</p>
    <div class="hero-buttons">
      <button class="btn btn-primary" data-section="voitures">
        <i class="fas fa-car"></i> Voir nos véhicules
      </button>
      <button class="btn btn-secondary" data-section="vendre">
        <i class="fas fa-car-crash"></i> Vendre ma voiture
      </button>
    </div>
  </div>
</section>

<section id="services" class="section">
  <div class="section-header">
    <h2>Nos Services Premium</h2>
    <p>ElHaji Auto propose une gamme complète de services pour répondre à tous vos besoins automobiles</p>
  </div>
  
  <div class="services">
    <a href="#voitures" class="service-card-link" data-section="voitures">
      <div class="service-card">
        <div class="service-icon">
          <i class="fas fa-car"></i>
        </div>
        <h3>Achat de Véhicules</h3>
        <p>Découvrez notre large sélection de véhicules neufs et d'occasion, rigoureusement inspectés et garantis.</p>
      </div>
    </a>
    
    <a href="#contact" class="service-card-link" data-section="contact">
      <div class="service-card">
        <div class="service-icon">
          <i class="fas fa-exchange-alt"></i>
        </div>
        <h3>Reprise</h3>
        <p>Estimez et vendez votre ancien véhicule rapidement et au meilleur prix</p>
      </div>
    </a>
    
    <a href="#vendre" class="service-card-link" data-section="vendre">
      <div class="service-card">
        <div class="service-icon">
          <i class="fas fa-hand-holding-usd"></i>
        </div>
        <h3>Vendez votre voiture</h3>
        <p>Estimez et vendez votre voiture au meilleur prix en quelques minutes</p>
      </div>
    </a>
    
    <a href="https://maps.app.goo.gl/u8FNrfQ3N8Pwy8RM8" target="_blank" class="service-card-link">
      <div class="service-card">
        <div class="service-icon">
          <i class="fas fa-tools"></i>
        </div>
        <h3>Notre garage de mécanicien</h3>
        <p>Atelier équipé avec des techniciens experts pour l'entretien et la réparation de votre véhicule.</p>
      </div>
    </a>
  </div>
</section>

<section id="voitures" class="section">
  <div class="section-header">
    <h2>Notre Sélection de Véhicules</h2>
    <p>Découvrez nos meilleures offres de voitures neuves et d'occasion</p>
  </div>
  
  <div class="cars-container">
    <div class="cars" id="carList"></div>
    
    <div class="pagination" id="pagination"></div>
  </div>
</section>

<section id="apropos" class="section">
  <div class="section-header">
    <h2>À Propos de ElHaji Auto</h2>
    <p>Découvrez notre histoire et notre engagement envers l'excellence automobile</p>
  </div>
  
  <div class="about-content">
    <div class="about-image">
      <img src="https://images.unsplash.com/photo-1485291571150-772bcfc10da5?auto=format&fit=crop&w=800&q=80" alt="Concession ElHaji Auto">
    </div>
    
    <div class="about-text">
      <h3>Notre Engagement Depuis 2010</h3>
      <p>Fondée en 2010, ElHaji Auto s'est rapidement imposée comme un acteur majeur dans la vente de véhicules au Maroc grâce à son engagement envers la qualité, la transparence et la satisfaction client.</p>
      <p>Notre équipe de professionnels passionnés vous accompagne à chaque étape de votre projet automobile, de la sélection du véhicule jusqu'à l'après-vente, en passant par le financement et la reprise.</p>
      
      <div class="about-stats">
        <div class="stat-item">
          <div class="number">12+</div>
          <div class="label">Années d'expérience</div>
        </div>
        <div class="stat-item">
          <div class="number">5K+</div>
          <div class="label">Clients satisfaits</div>
        </div>
        <div class="stat-item">
          <div class="number">98%</div>
          <div class="label">Satisfaction client</div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="vendre" class="section">
  <div class="section-header">
    <h2>Vendre ma voiture</h2>
    <p>Estimez et vendez votre voiture au meilleur prix en quelques minutes</p>
  </div>
  
  <div class="sell-form-container">
    <div class="sell-form">
      <h3>Prendre rendez-vous pour estimation</h3>
      <form id="sellCarForm">
        <div class="form-notification success-message" id="successMessage">
          <i class="fas fa-check-circle"></i> Votre demande a été envoyée avec succès ! Nous vous contacterons rapidement.
        </div>
        <div class="form-notification error-message" id="errorMessage">
          <i class="fas fa-exclamation-circle"></i> Une erreur s'est produite. Veuillez réessayer.
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="sellName">Nom complet *</label>
            <input type="text" id="sellName" required placeholder="Votre nom complet">
          </div>
          
          <div class="form-group">
            <label for="sellPhone">Téléphone *</label>
            <input type="tel" id="sellPhone" required placeholder="+212 6 XX XX XX XX">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="sellEmail">Email *</label>
            <input type="email" id="sellEmail" required placeholder="votre@email.com">
          </div>
          
          <div class="form-group">
            <label for="sellDate">Date souhaitée *</label>
            <input type="date" id="sellDate" required>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="sellBrand">Marque du véhicule *</label>
            <input type="text" id="sellBrand" required placeholder="Ex: Volkswagen">
          </div>
          
          <div class="form-group">
            <label for="sellModel">Modèle *</label>
            <input type="text" id="sellModel" required placeholder="Ex: Golf 7 GTI">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="sellYear">Année *</label>
            <input type="number" id="sellYear" min="1980" max="2025" required placeholder="Ex: 2018">
          </div>
          
          <div class="form-group">
            <label for="sellMileage">Kilométrage (km) *</label>
            <input type="number" id="sellMileage" required placeholder="Ex: 75000">
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="sellFuel">Carburant *</label>
            <select id="sellFuel" required>
              <option value="">Sélectionnez</option>
              <option value="essence">Essence</option>
              <option value="diesel">Diesel</option>
              <option value="hybride">Hybride</option>
              <option value="electrique">Électrique</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="sellTransmission">Transmission *</label>
            <select id="sellTransmission" required>
              <option value="">Sélectionnez</option>
              <option value="manuelle">Manuelle</option>
              <option value="automatique">Automatique</option>
            </select>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label for="sellCondition">État du véhicule *</label>
            <textarea id="sellCondition" required placeholder="Décrivez l'état général de votre véhicule, les réparations effectuées, les accidents éventuels..."></textarea>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group full-width">
            <label for="sellPhotos">Ajouter des photos (optionnel)</label>
            <input type="file" id="sellPhotos" multiple accept="image/*">
          </div>
        </div>
        
        <button type="submit" class="submit-btn" id="submitBtn">
          <i class="fas fa-calendar-check"></i> Prendre rendez-vous
        </button>
      </form>
    </div>
  </div>
</section>

<section id="contact" class="section">
  <div class="section-header">
    <h2>Contactez-Nous</h2>
    <p>Notre équipe est à votre disposition pour répondre à toutes vos questions</p>
  </div>
  
  <div class="contact-container">
    <div class="contact-info">
      <h3>Nos Coordonnées</h3>
      
      <div class="contact-detail">
        <div class="contact-icon">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <div class="contact-text">
          <h4>Adresse</h4>
          <p>123 Avenue Hassan II, Tanger</p>
        </div>
      </div>
      
      <div class="contact-detail">
        <div class="contact-icon">
          <i class="fas fa-phone"></i>
        </div>
        <div class="contact-text">
          <h4>Téléphone</h4>
          <p>+212 6 63 08 02 62</p>
        </div>
      </div>
      
      <div class="contact-detail">
        <div class="contact-icon">
          <i class="fas fa-envelope"></i>
        </div>
        <div class="contact-text">
          <h4>Email</h4>
          <a href="mailto:contact@elhajiauto.com">contact@elhajiauto.com</a>
        </div>
      </div>
      
      <div class="contact-detail">
        <div class="contact-icon">
          <i class="fas fa-clock"></i>
        </div>
        <div class="contact-text">
          <h4>Horaires</h4>
          <p>Lun-Ven: 9h00-19h00<br>Sam: 9h00-13h00</p>
        </div>
      </div>
      
      <div class="social-links">
        <a href="https://facebook.com/elhajiauto" target="_blank" aria-label="Facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
        <a href="https://instagram.com/elhajiauto" target="_blank" aria-label="Instagram">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://wa.me/212658629841" target="_blank" aria-label="WhatsApp">
          <i class="fab fa-whatsapp"></i>
        </a>
        <a href="https://tiktok.com/@elhajiauto" target="_blank" aria-label="TikTok">
          <i class="fab fa-tiktok"></i>
        </a>
      </div>
    </div>
    
    <div class="contact-form">
      <h3>Envoyez-nous un message</h3>
      <form id="contactForm">
        <div class="form-group">
          <label for="name">Nom complet</label>
          <input type="text" id="name" required>
        </div>
        
        <div class="form-group">
          <label for="email">Email</label>
          <input type="email" id="email" required>
        </div>
        
        <div class="form-group">
          <label for="phone">Téléphone</label>
          <input type="tel" id="phone">
        </div>
        
        <div class="form-group">
          <label for="subject">Sujet</label>
          <select id="subject">
            <option value="info">Demande d'information</option>
            <option value="rdv">Prendre rendez-vous</option>
            <option value="test">Reprise</option>
            <option value="service">Service de mechanicien</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="message">Message</label>
          <textarea id="message" required></textarea>
        </div>
        
        <button type="submit" class="submit-btn">Envoyer le message</button>
      </form>
    </div>
  </div>
</section>

<footer>
  <div class="footer-content">
    <div class="footer-col">
      <h4>ElHaji Auto</h4>
      <p>Votre concessionnaire automobile de confiance au Maroc depuis 2010, offrant une sélection premium de véhicules neufs et d'occasion.</p>
      <div class="footer-social">
        <a href="https://facebook.com/elhajiauto" target="_blank"><i class="fab fa-facebook-f"></i></a>
        <a href="https://instagram.com/elhajiauto" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://wa.me/212658629841" target="_blank"><i class="fab fa-whatsapp"></i></a>
        <a href="https://tiktok.com/@elhajiauto" target="_blank"><i class="fab fa-tiktok"></i></a>
      </div>
    </div>
    
    <div class="footer-col">
      <h4>Liens Rapides</h4>
      <ul class="footer-links">
        <li><a href="#accueil" data-section="accueil"><i class="fas fa-chevron-right"></i> Accueil</a></li>
        <li><a href="#voitures" data-section="voitures"><i class="fas fa-chevron-right"></i> Voitures</a></li>
        <li><a href="#services" data-section="services"><i class="fas fa-chevron-right"></i> Services</a></li>
        <li><a href="#apropos" data-section="apropos"><i class="fas fa-chevron-right"></i> À propos</a></li>
        <li><a href="#vendre" data-section="vendre"><i class="fas fa-chevron-right"></i> Vendre ma voiture</a></li>
        <li><a href="#contact" data-section="contact"><i class="fas fa-chevron-right"></i> Contact</a></li>
      </ul>
    </div>
    
    <div class="footer-col">
      <h4>Nos Services</h4>
      <ul class="footer-links">
        <li><a href="#voitures" data-section="voitures"><i class="fas fa-chevron-right"></i> Achat de véhicules</a></li>
        <li><a href="#contact" data-section="contact"><i class="fas fa-chevron-right"></i> Reprise</a></li>
        <li><a href="#vendre" data-section="vendre"><i class="fas fa-chevron-right"></i> Vendez votre voiture</a></li>
        <li><a href="https://maps.app.goo.gl/u8FNrfQ3N8Pwy8RM8" target="_blank"><i class="fas fa-chevron-right"></i> Notre garage de mécanicien</a></li>
      </ul>
    </div>
    
    <div class="footer-col">
      <h4>Contact</h4>
      <div class="footer-contact">
        <p><i class="fas fa-map-marker-alt"></i> 123 Avenue Hassan II, Tanger</p>
        <p><i class="fas fa-phone"></i> +212 6 63 08 02 62</p>
        <p><i class="fas fa-envelope"></i> contact@elhajiauto.com</p>
        <p><i class="fas fa-clock"></i> Lun-Ven: 9h-19h | Sam: 9h-13h</p>
      </div>
    </div>
  </div>
  
  <div class="copyright">
    <p>&copy; 2025 ElHaji Auto. Tous droits réservés.</p>
  </div>
</footer>

<div id="carModal" class="modal" onclick="closeModal(event)">
  <div class="modal-content" onclick="event.stopPropagation()">
    <span class="modal-close" onclick="closeModal(event)">&times;</span>
    <div class="modal-header">
      <h3 id="modalCarName"></h3>
      <div class="modal-price" id="modalCarPrice"></div>
    </div>
    <div class="modal-main">
      <div class="modal-images">
        <div class="main-image" id="mainImageContainer"></div>
        <div class="thumbnails" id="thumbnails"></div>
      </div>
      <div class="modal-info">
        <div class="car-specs" id="carSpecs"></div>
        <div class="modal-description" id="carDescription"></div>
        <div class="modal-actions">
          <a href="https://wa.me/212658629841" target="_blank" class="modal-btn btn-contact">
            <i class="fab fa-whatsapp"></i> WhatsApp
          </a>
          <button onclick="toggleCallPopup()" class="modal-btn btn-contact">
            <i class="fas fa-phone"></i> Appelle-moi
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div id="callPopup" class="call-popup">
  <div class="call-popup-content">
    <h4>Choisissez un numéro :</h4>
    <ul>
      <li><a href="tel:0658629841"><i class="fas fa-phone-alt"></i> 0658 62 98 41</a></li>
      <li><a href="tel:0672110078"><i class="fas fa-phone-alt"></i> 0672 11 00 78</a></li>
      <li><a href="tel:0663080262"><i class="fas fa-phone-alt"></i> 0663 08 02 62</a></li>
    </ul>
    <button onclick="toggleCallPopup()" class="close-call-popup">Fermer</button>
  </div>
</div>

<div class="back-to-top" id="backToTop">
  <i class="fas fa-arrow-up"></i>
</div>

<script>
  // Configuration Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyC0YUGE6hRG9sck7rXcqjaB3he1nRGgbbU",
    authDomain: "elhaji-auto.firebaseapp.com",
    projectId: "elhaji-auto",
    storageBucket: "elhaji-auto.appspot.com",
    messagingSenderId: "596529784342",
    appId: "1:596529784342:web:dfa01b1e33287ce36db737"
  };

  // Initialisation Firebase
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  
  // Références aux collections
  const carsCollection = db.collection("cars");
  const sellRequestsCollection = db.collection("sellRequests");
  const contactMessagesCollection = db.collection("contactMessages");

  // Clé API ImgBB
  const IMGBB_API_KEY = "e1deb8db84872a7a98bb2afa34bf4938";

  // Fonction pour uploader une image sur ImgBB
  async function uploadToImgBB(imageFile) {
    const formData = new FormData();
    formData.append('image', imageFile);
    formData.append('key', IMGBB_API_KEY);
    
    try {
      const response = await fetch('https://api.imgbb.com/1/upload', {
        method: 'POST',
        body: formData
      });
      
      const data = await response.json();
      
      if (data.success) {
        return data.data.url;
      } else {
        throw new Error(data.error.message || "Échec de l'upload sur ImgBB");
      }
    } catch (error) {
      console.error("Erreur ImgBB:", error);
      throw new Error("Erreur lors de l'upload de l'image");
    }
  }

  // Configuration de la pagination
  const carsPerPage = 9;
  let currentPage = 1;
  let cars = [];
  
  // Variables globales pour la navigation des images
  let currentCarImages = [];
  let currentImageIndex = 0;
  
  // Charger les voitures depuis Firebase
  function fetchCars() {
    return carsCollection.get().then(querySnapshot => {
      cars = [];
      querySnapshot.forEach(doc => {
        cars.push({ id: doc.id, ...doc.data() });
      });
      return cars;
    });
  }

  // Fonction pour afficher les voitures avec pagination
  async function renderCars(page = 1) {
    try {
      await fetchCars();
      currentPage = page;
      const carList = document.getElementById("carList");
      const pagination = document.getElementById("pagination");
      
      // Calculer les voitures à afficher
      const startIndex = (page - 1) * carsPerPage;
      const endIndex = startIndex + carsPerPage;
      const paginatedCars = cars.slice(startIndex, endIndex);
      
      // Afficher les voitures
      carList.innerHTML = "";
      paginatedCars.forEach(car => {
        const carCard = document.createElement("div");
        carCard.className = "car";
        carCard.tabIndex = 0;
        carCard.setAttribute("role", "button");
        carCard.setAttribute("aria-label", `Voir les détails de ${car.name}`);
        carCard.addEventListener("click", () => openModal(car.id));
        carCard.addEventListener("keydown", e => {
          if(e.key === "Enter" || e.key === " ") openModal(car.id);
        });

carCard.innerHTML = `
  <div class="car-image">
    <img src="${car.images[0] || 'https://via.placeholder.com/300x180?text=Image+Manquante'}" alt="${car.name}">
    <div class="car-badge" style="background-color: ${car.status === 'vendue' ? '#e53e3e' : car.type === 'neuve' ? '#3182ce' : '#48bb78'}">
      ${car.status === 'vendue' ? 'Vendue' : car.type === 'neuve' ? 'Nouveau' : 'Occasion - Disponible'}
    </div>
  </div>
          <div class="car-content">
            <div class="car-header">
              <h3>${car.name}</h3>
              <div class="car-price">${car.price} DH</div>
            </div>
            <div class="car-details">
              <div class="car-detail">
                <i class="fas fa-calendar"></i>
                <span>${car.year}</span>
              </div>
              <div class="car-detail">
                <i class="fas fa-tachometer-alt"></i>
                <span>${car.mileage.toLocaleString()} km</span>
              </div>
              <div class="car-detail">
                <i class="fas fa-gas-pump"></i>
                <span>${car.fuel}</span>
              </div>
              <div class="car-detail">
                <i class="fas fa-cog"></i>
                <span>${car.transmission}</span>
              </div>
            </div>
            <a href="#" class="car-cta" onclick="event.stopPropagation(); openModal('${car.id}')">
              <i class="fas fa-info-circle"></i> Voir détails
            </a>
          </div>
        `;
        carList.appendChild(carCard);
      });
      
      // Afficher la pagination
      renderPagination();
    } catch (error) {
      console.error("Erreur de chargement des voitures:", error);
      carList.innerHTML = `<p class="error">Erreur de chargement des voitures. Veuillez réessayer.</p>`;
    }
  }
  
  // Fonction pour afficher la pagination
  function renderPagination() {
    const pagination = document.getElementById("pagination");
    const totalPages = Math.ceil(cars.length / carsPerPage);
    
    pagination.innerHTML = '';
    
    // Bouton Précédent
    const prevBtn = document.createElement('button');
    prevBtn.className = `page-btn prev ${currentPage === 1 ? 'disabled' : ''}`;
    prevBtn.innerHTML = '<i class="fas fa-chevron-left"></i> Précédent';
    prevBtn.addEventListener('click', () => {
      if (currentPage > 1) renderCars(currentPage - 1);
    });
    pagination.appendChild(prevBtn);
    
    // Numéros de page
    for (let i = 1; i <= totalPages; i++) {
      const pageBtn = document.createElement('button');
      pageBtn.className = `page-btn ${i === currentPage ? 'active' : ''}`;
      pageBtn.textContent = i;
      pageBtn.addEventListener('click', () => renderCars(i));
      pagination.appendChild(pageBtn);
    }
    
    // Bouton Suivant
    const nextBtn = document.createElement('button');
    nextBtn.className = `page-btn next ${currentPage === totalPages ? 'disabled' : ''}`;
    nextBtn.innerHTML = 'Suivant <i class="fas fa-chevron-right"></i>';
    nextBtn.addEventListener('click', () => {
      if (currentPage < totalPages) renderCars(currentPage + 1);
    });
    pagination.appendChild(nextBtn);
  }

  // Modal functions
  const modal = document.getElementById("carModal");
  const modalCarName = document.getElementById("modalCarName");
  const modalCarPrice = document.getElementById("modalCarPrice");
  const mainImageContainer = document.getElementById("mainImageContainer");
  const thumbnailsContainer = document.getElementById("thumbnails");
  const carSpecs = document.getElementById("carSpecs");
  const carDescription = document.getElementById("carDescription");

  async function openModal(carId) {
    try {
      const carDoc = await carsCollection.doc(carId).get();
      if (!carDoc.exists) return;
      
      const car = carDoc.data();

      // Set car info
      modalCarName.textContent = car.name;
      modalCarPrice.textContent = car.price + " DH";
      carDescription.textContent = car.description;

      // Specs
      carSpecs.innerHTML = `
        <div class="spec-item">
          <i class="fas fa-calendar"></i>
          <div class="spec-text">
            <span class="spec-label">Année</span>
            <span class="spec-value">${car.year}</span>
          </div>
        </div>
        <div class="spec-item">
          <i class="fas fa-tachometer-alt"></i>
          <div class="spec-text">
            <span class="spec-label">Kilométrage</span>
            <span class="spec-value">${car.mileage.toLocaleString()} km</span>
          </div>
        </div>
        <div class="spec-item">
          <i class="fas fa-gas-pump"></i>
          <div class="spec-text">
            <span class="spec-label">Carburant</span>
            <span class="spec-value">${car.fuel}</span>
          </div>
        </div>
        <div class="spec-item">
          <i class="fas fa-cog"></i>
          <div class="spec-text">
            <span class="spec-label">Transmission</span>
            <span class="spec-value">${car.transmission}</span>
          </div>
        </div>
        <div class="spec-item">
          <i class="fas fa-horse-head"></i>
          <div class="spec-text">
            <span class="spec-label">Puissance</span>
            <span class="spec-value">${car.power} ch</span>
          </div>
        </div>
        <div class="spec-item">
          <i class="fas fa-palette"></i>
          <div class="spec-text">
            <span class="spec-label">Couleur</span>
            <span class="spec-value">${car.color}</span>
          </div>
        </div>
      `;

      // Mettre à jour les variables globales pour la navigation
      currentCarImages = car.images;
      currentImageIndex = 0;

      // Ajouter les flèches de navigation et l'indicateur dans l'image principale
      mainImageContainer.innerHTML = `
        <div class="image-nav prev" onclick="navigateImage(-1, event)">
          <i class="fas fa-chevron-left"></i>
        </div>
        <img id="mainImage" src="${currentCarImages[0]}" alt="${car.name}">
        <div class="image-nav next" onclick="navigateImage(1, event)">
          <i class="fas fa-chevron-right"></i>
        </div>
        <div class="image-indicator" id="imageIndicator">1 / ${currentCarImages.length}</div>
      `;

      // Thumbnails
      thumbnailsContainer.innerHTML = "";
      currentCarImages.forEach((src, index) => {
        const thumbnail = document.createElement("div");
        thumbnail.className = "thumbnail";
        if (index === 0) thumbnail.classList.add("active");
        thumbnail.innerHTML = `<img src="${src}" alt="Thumbnail ${index + 1}">`;
        thumbnail.addEventListener("click", () => {
          // Mettre à jour l'image principale
          document.getElementById("mainImage").src = src;
          // Mettre à jour les miniatures actives
          document.querySelectorAll(".thumbnail").forEach(t => t.classList.remove("active"));
          thumbnail.classList.add("active");
          // Mettre à jour l'index courant
          currentImageIndex = index;
          updateImageIndicator();
        });
        thumbnailsContainer.appendChild(thumbnail);
      });

      modal.style.display = "flex";
      document.body.style.overflow = "hidden";
      modal.classList.remove("closing");

      // Ajouter les écouteurs d'événements pour les touches du clavier
      document.addEventListener('keydown', handleKeyDown);
    } catch (error) {
      console.error("Erreur d'ouverture du modal:", error);
    }
  }

  function updateImageIndicator() {
    const indicator = document.getElementById("imageIndicator");
    if (indicator) {
      indicator.textContent = `${currentImageIndex + 1} / ${currentCarImages.length}`;
    }
  }

  function navigateImage(direction, event) {
    event.stopPropagation();
    let newIndex = currentImageIndex + direction;
    
    // Vérifier les limites
    if (newIndex < 0) {
      newIndex = currentCarImages.length - 1;
    } else if (newIndex >= currentCarImages.length) {
      newIndex = 0;
    }
    
    currentImageIndex = newIndex;
    document.getElementById("mainImage").src = currentCarImages[currentImageIndex];
    
    // Mettre à jour les miniatures actives
    document.querySelectorAll(".thumbnail").forEach((thumb, index) => {
      thumb.classList.toggle("active", index === currentImageIndex);
    });
    
    updateImageIndicator();
  }

  function handleKeyDown(e) {
    if (modal.style.display === "flex") {
      if (e.key === "ArrowLeft") {
        navigateImage(-1, e);
      } else if (e.key === "ArrowRight") {
        navigateImage(1, e);
      } else if (e.key === "Escape") {
        closeModal(e);
      }
    }
  }

  function closeModal(e) {
    if (e.target === modal || e.target.classList.contains("modal-close") || e.key === "Escape") {
      // Ajouter une animation de fermeture
      modal.classList.add("closing");
      
      setTimeout(() => {
        modal.style.display = "none";
        document.body.style.overflow = "auto";
        modal.classList.remove("closing");
        // Retirer l'écouteur d'événements du clavier
        document.removeEventListener('keydown', handleKeyDown);
      }, 300);
    }
  }

  // Navigation entre sections
  function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('.section').forEach(section => {
      section.classList.remove('active');
    });
    
    // Show the selected section
    const section = document.getElementById(sectionId);
    if (section) {
      section.classList.add('active');
      
      // Scroll to section
      setTimeout(() => {
        section.scrollIntoView({ behavior: "smooth", block: "start" });
      }, 50);
    }
    
    // Update active nav link
    document.querySelectorAll("nav a, .footer-links a").forEach(link => {
      link.classList.remove("active");
      if (link.getAttribute("data-section") === sectionId) {
        link.classList.add("active");
      }
    });
  }

  // Back to top button
  const backToTopBtn = document.getElementById("backToTop");
  
  window.addEventListener("scroll", () => {
    if (window.pageYOffset > 300) {
      backToTopBtn.classList.add("show");
    } else {
      backToTopBtn.classList.remove("show");
    }
  });
  
  backToTopBtn.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  // Contact form submission
  document.getElementById("contactForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    
    // Récupérer les valeurs du formulaire
    const name = document.getElementById("name").value;
    const email = document.getElementById("email").value;
    const phone = document.getElementById("phone").value;
    const subject = document.getElementById("subject").value;
    const message = document.getElementById("message").value;
    
    // Préparer les données pour l'envoi
    const messageData = {
      date: firebase.firestore.Timestamp.fromDate(new Date()),
      name,
      email,
      phone,
      subject,
      message,
      status: "unread"
    };
    
    try {
      // Envoyer à Firebase
      await contactMessagesCollection.add(messageData);
      
      // Afficher un message de succès
      alert("Merci pour votre message ! Nous vous contacterons très rapidement.");
      this.reset();
    } catch (error) {
      console.error("Erreur d'envoi:", error);
      alert("Une erreur s'est produite. Veuillez réessayer plus tard.");
    }
  });

  // Formulaire pour vendre sa voiture
  document.getElementById("sellCarForm").addEventListener("submit", async function(e) {
    e.preventDefault();
    
    // Récupérer les valeurs du formulaire
    const name = document.getElementById("sellName").value;
    const phone = document.getElementById("sellPhone").value;
    const email = document.getElementById("sellEmail").value;
    const date = document.getElementById("sellDate").value;
    const brand = document.getElementById("sellBrand").value;
    const model = document.getElementById("sellModel").value;
    const year = document.getElementById("sellYear").value;
    const mileage = document.getElementById("sellMileage").value;
    const fuel = document.getElementById("sellFuel").value;
    const transmission = document.getElementById("sellTransmission").value;
    const condition = document.getElementById("sellCondition").value;
    const files = document.getElementById("sellPhotos").files;
    
    // Vérifier les champs obligatoires
    if (!name || !phone || !email || !date || !brand || !model || !year || !mileage || !fuel || !transmission || !condition) {
      showError("Veuillez remplir tous les champs obligatoires");
      return;
    }

    // Afficher un indicateur de chargement
    const submitBtn = document.getElementById("submitBtn");
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Envoi en cours...';
    submitBtn.disabled = true;
    document.getElementById("sellCarForm").classList.add('loading');

    try {
      // Préparer les données pour l'envoi
      const requestData = {
        timestamp: firebase.firestore.FieldValue.serverTimestamp(),
        name,
        phone,
        email,
        appointmentDate: new Date(date),
        brand,
        model,
        year: parseInt(year),
        mileage: parseInt(mileage),
        fuel,
        transmission,
        condition,
        status: "pending",
        photos: []
      };

      // Uploader les photos sur ImgBB si elles existent
      if (files.length > 0) {
        const uploadPromises = [];
        
        for (let i = 0; i < files.length; i++) {
          const file = files[i];
          uploadPromises.push(uploadToImgBB(file));
        }
        
        // Attendre que toutes les photos soient uploadées
        const photoUrls = await Promise.all(uploadPromises);
        requestData.photos = photoUrls;
      }

      // Envoyer à Firebase
      await sellRequestsCollection.add(requestData);
      
      // Afficher le message de succès
      document.getElementById("successMessage").style.display = "block";
      document.getElementById("errorMessage").style.display = "none";
      
      // Réinitialiser le formulaire
      this.reset();
    } catch (error) {
      console.error("Erreur d'envoi:", error);
      showError(`Erreur: ${error.message || "Veuillez réessayer plus tard"}`);
    } finally {
      // Réinitialiser le bouton
      submitBtn.innerHTML = '<i class="fas fa-calendar-check"></i> Prendre rendez-vous';
      submitBtn.disabled = false;
      document.getElementById("sellCarForm").classList.remove('loading');
    }
  });

  // Fonction pour afficher les erreurs
  function showError(message) {
    const errorElement = document.getElementById("errorMessage");
    errorElement.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${message}`;
    errorElement.style.display = "block";
    document.getElementById("successMessage").style.display = "none";
    
    // Cacher le message après 5 secondes
    setTimeout(() => {
      errorElement.style.display = "none";
    }, 5000);
  }

  // Fonction pour afficher/masquer le popup d'appel
  function toggleCallPopup() {
    const popup = document.getElementById("callPopup");
    const isVisible = popup.style.display === "flex";
    popup.style.display = isVisible ? "none" : "flex";
  }

  // Navigation event listeners
  document.querySelectorAll("nav a, .footer-links a, .hero-buttons button, .service-card-link").forEach(element => {
    element.addEventListener("click", function(e) {
      if (this.hasAttribute("data-section")) {
        e.preventDefault();
        const sectionId = this.getAttribute("data-section");
        if (sectionId) {
          showSection(sectionId);
        }
      }
    });
  });

  // Initialisation
  window.onload = async () => {
    await renderCars();
    showSection("accueil");
    
    // Show hero section on load
    document.querySelector('.hero').style.display = 'flex';
    
    // Ajout de l'écouteur pour le logo
    document.getElementById("logo").addEventListener("click", function() {
      showSection("accueil");
    });
  };
</script>
</body>
</html>
